
CSEG AT 0H

RESET:
	JMP INIT

ORG 00BH
	JMP	T0_ISR

ORG 001BH
	JMP	T1_ISR


INIT:
	CALL TIMER_INIT
	
	MOV R7,#0
	MOV R6,#0
	SETB ET1
	SETB EA
START:	
	SJMP START

T0_ISR:

	RETI

T1_ISR:
	MOV TH1,#0FFH
	MOV A,R7
	MOV DPTR,#RING
	MOVC A,@A+DPTR
	MOV P1,A
	INC R7
	CJNE R7,#6,OMIN
	MOV R7,#0
OMIN:	
	MOV A,R6
	MOV DPTR,#TAB7
	MOVC A,@A+DPTR
	MOV P0,A
	INC R6
	CJNE R6,#6,OMIN1
	MOV R6,#0
OMIN1:	
	RETI

TIMER_INIT:
	MOV TMOD, #00010001B
	SETB TR0
	SETB TR1
	RET

TAB7:	
	DB	0xDE, 0x82, 0xEC, 0xE6
	DB	0xB2, 0x76, 0x7E, 0xC2
	DB	0xFE, 0xF6, 0x1C, 0xBA
	DB	0xF8, 0xFA, 0x20, 0x00

RING:
	DB 0xFE,0xFD,0xFB,0xF7,0xEF,0xDF

END
	


